# Basic Configuration Template
# Copy this file and customize for your team

trigger: none  # Change to 'main' for automatic triggers on code changes

pool:
  vmImage: 'ubuntu-latest'

parameters:
  # ========================================
  # üéØ CUSTOMIZE THESE FOR YOUR TEAM
  # ========================================
  
  - name: analyzeTop
    displayName: 'Number of work items to analyze'
    type: number
    default: 10  # Start with 5-10 for testing
    values: [5, 10, 15, 20, 25]
  
  - name: projectName
    displayName: 'Azure DevOps Project Name'
    type: string
    default: 'YOUR_PROJECT_NAME'  # ‚Üê CHANGE THIS
  
  - name: workItemTypes
    displayName: 'Work Item Types (comma-separated)'
    type: string
    default: 'User Story,Product Backlog Item'
    values:
      - 'User Story,Product Backlog Item'    # Scrum teams
      - 'User Story,Task,Bug'                # Agile teams
      - 'Epic,Feature,User Story'            # SAFe teams
      - 'Epic,Feature'                       # Portfolio view
  
  - name: analysisMode
    displayName: 'Analysis Focus'
    type: string
    default: 'Quality'
    values:
      - 'Quality'        # INVEST framework + scores
      - 'Technical'      # Implementation focus
      - 'Business'       # Value and impact focus
      - 'Comprehensive'  # Full analysis

variables:
  # ========================================
  # üîê SECURITY - Create this variable group
  # ========================================
  - group: 'copilot-credentials'  # Must contain: GITHUB_TOKEN
  
  # ========================================
  # üõ†Ô∏è OPTIONAL CUSTOMIZATIONS
  # ========================================
  
  # Project configuration (auto-calculated from projectName)
  - name: PROJECT_NAME_ENCODED
    value: ${{ replace(parameters.projectName, ' ', '%20') }}
  
  # Performance tuning
  - name: COPILOT_TIMEOUT
    value: 60  # seconds per work item analysis
  - name: API_TIMEOUT  
    value: 30  # seconds per API call
  
  # Custom WIQL filters (optional)
  - name: ADDITIONAL_WIQL_FILTERS
    value: ''  # e.g., "AND [System.AreaPath] = 'YourTeam'"

# ========================================
# üìã PIPELINE STAGES
# ========================================
stages:
  # Import the main pipeline template
  - template: ../pipeline/backlog-analyzer.yml
    parameters:
      analyzeTop: ${{ parameters.analyzeTop }}
      projectName: ${{ parameters.projectName }}
      workItemTypes: ${{ parameters.workItemTypes }}
      analysisMode: ${{ parameters.analysisMode }}

# ========================================
# üí° CUSTOMIZATION NOTES
# ========================================
#
# 1. REQUIRED CHANGES:
#    - Update 'projectName' parameter default value
#    - Create 'copilot-credentials' variable group with your GitHub token
#
# 2. TEAM-SPECIFIC TUNING:
#    - Adjust 'analyzeTop' based on backlog size  
#    - Choose appropriate 'workItemTypes' for your process
#    - Set 'analysisMode' based on current focus
#
# 3. OPTIONAL ENHANCEMENTS:
#    - Add triggers for scheduled analysis
#    - Customize WIQL filters for your team's work
#    - Adjust timeouts based on your Copilot performance
#
# 4. ADVANCED OPTIONS:
#    - Add area path or iteration filters
#    - Integrate with Teams/Slack notifications
#    - Connect to Power BI for trending analysis
#